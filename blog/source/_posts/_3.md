---
title: all
date: 2017-10-27
tag:
- 离线缓存
- apple特定的meta标签
---
使用方式
html头部引入
``` html
<html lang="en" manifest="index.manifest">
```
### manifest文件
以#号开头的是注释，一般会在第二行写个版本号，用来在缓存的文件更新时，更改manifest的作用，可以是版本号，时间戳或者md5码等等。
``` shell
#version 1.3
# 需要被缓存的
CACHE:
    test.css
# 要绕过缓存直接读取文件的
NETWORK:
	*
# 当资源五福访问时，浏览器会使用该页面 
FALLBACK:
/html5/ /404.html
```

### 如何更新缓存
以下三种方式：
- 更新manifest文件
- 通过js操作 window.applicationCache.update();
- 清除浏览器缓存



## apple-specific meta标签
``` html
<meta name="apple-mobile-web-app-capable" content="yes"><!-- 应用是否要全屏跑 -->
<meta name="apple-mobile-web-app-status-bar-style" content="black"> <!-- 必须要陪和上面的meta才有效果，default会默认显示，如果是black，则会是一个黑色的背景 -->
<meta name="format-detection" content="telephone=no"><!-- 电话号码检测 -->
```
## 其他meta标签
``` html
<!-- 默认a标签里面的href都会自动去启用DNS prefetching,但是a标签的默认启动对HTTPS不起作用 -->
<!-- chromium启动了8个完全异步的线程来做这个预解析，每个线程都处理一个队列，等待域名响应，最终操作系统会响应一个DNS解析给线程，然后线程提出队列，开始下一个 -->
<meta http-equiv="x-dns-prefetch-control" content="on"> <!-- dns prefetching是提前加载域名解析的，省去解析时间 -->
<link rel="dns-prefetch" href="//g.tbcdn.cn">
```

## iframe的缺点
- 阻塞页面的onload事件
- 不利于seo
- 与主页面共享连接池，而浏览器对同域的链接有限制，影响页面并行加载
- 如果需要使用，可以采用js动态给iframe夹src属性值

## Label作用
- 定义表当控制间的关系，当用户选择该标签时，浏览器焦点会在for的上面

## 多个标签间通信
- websocket、localstorage、cookies
socket demo
``` html
<ul id="messages"></ul>
	<form action="">
		<input id="m" autocomplete="off" /><button>Send</button>
	</form>
<script src="/socket.io/socket.io.js"></script>
<script>
	let name;
	var socket = io();
	socket.on('getName',function(msg){
		name=msg;
	});
	$('form').submit(function () {
		socket.emit('chatmessage', name+':  '+$('#m').val());
		$('#m').val('');

		return false;
	});

	socket.on('getchatmessage', function (msg) {
		
		$('#messages').append($('<li>').text(msg));
	});
</script>
```
- postMessage进行iframe通信
``` js
// 发送方
var receiver = document.getElementById('receiver').contentWindow;
function sendMessage(e) {
	e.preventDefault();
	// 第二个参数决定哪些域名能接受这个message
	receiver.postMessage('Hello Treehouse!', 'http://demos.matt-west.com');
}
// ...接受者
function receiveMessage(e) {
    if (e.origin !== "http://s.codepen.io"){
      return;
	}
    messageEle.innerHTML = "Message Received: " + e.data;
}
window.addEventListener('message', receiveMessage);
```

### page visibility api作用
通过事件监测当前page是否在焦点，当页面被切换到后台时，可以停止音乐或视频
``` js
function handleVisibilityChange() {
  if (document.hidden) {
    pauseSimulation();
  } else  {
    startSimulation();
  }
}

document.addEventListener("visibilitychange", handleVisibilityChange, false);
```

### 水平垂直居中
``` css
.container {
 	display: flex;
 	align-items: center; 		/* 垂直居中 */
 	justify-content: center;	/* 水平居中 */

 }
```

### haslayout
这是一个非标准的html元素属性，只在ie7及以下支持，如果触发，就会导致元素以某种方式重新渲染（不是期望的、随机的可能是灾难），一般用来清除ie浮动

### BFC