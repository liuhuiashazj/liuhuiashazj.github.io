---
title: Vue响应式
tags:
- vue
- 响应式
---

首先看端代码如何将一个普通对象转为可以监控到变化的对象
``` js
function touch(parent, key, obj) {
    if (typeof obj === 'object') {
        for (let i in obj) {
            let result = touch(obj, i, obj[i]);
            if (typeof obj[i] !== 'object') {} else {
                let curVal = obj[i];
                Object.defineProperty(obj, i, {
                    get: function() {
                        console.log('get', i);
                        return curVal;
                    },
                    set: function(value) {
                        console.log('set', i, value);
                        curVal = value;
                    }
                });
            }

        }
    } else {
        let currentValue = obj;
        Object.defineProperty(parent, key, {
            get: function() {
                console.log('get', key);
                return currentValue;
            },
            set: function(value) {
                console.log('set', key, value);
                currentValue = value;

            }
        });
        return parent;
    }
}
var objtest = {
    a: 1,
    b: {
        c: 2,
        d: 3,
        e:{
            f:4,
            g:5
        }
    }
};
touch(window, 'getObj', objtest);
objtest.b.c='new';

```