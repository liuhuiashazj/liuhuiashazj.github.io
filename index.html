<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Sunlife">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Sunlife">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sunlife">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Sunlife </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Sunlife</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/24/34/" itemprop="url">
                  34
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-24T14:19:16+08:00" content="2017-07-24">
              2017-07-24
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/18/33/" itemprop="url">
                  事件、并发、js（翻译）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-18T15:51:50+08:00" content="2017-07-18">
              2017-07-18
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>现在的web app本质上都是事件驱动的，虽然浏览器内部的triggering、executing、handling event，看起来是黑盒。</p>
<p>如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"doStuff"</span>&gt;</span>Do Stuff<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></div><div class="line">    document.getElementById('doStuff')</div><div class="line">        .addEventListener('click', function() &#123;</div><div class="line">                console.log('Do Stuff');</div><div class="line">            &#125;</div><div class="line">        );</div><div class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/07/18/33/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/06/32/" itemprop="url">
                  前端内存泄漏分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-06T13:31:14+08:00" content="2017-07-06">
              2017-07-06
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://developers.google.com/web/tools/chrome-devtools/memory-problems/?hl=zh-cn" target="_blank" rel="external">https://developers.google.com/web/tools/chrome-devtools/memory-problems/?hl=zh-cn</a><br>内存泄漏的几种检测方式</p>
<h2 id="按-Shift-Esc-或者转到-Chrome-主菜单并选择-More-tools-gt-Task-manager，打开任务管理器。"><a href="#按-Shift-Esc-或者转到-Chrome-主菜单并选择-More-tools-gt-Task-manager，打开任务管理器。" class="headerlink" title="按 Shift+Esc 或者转到 Chrome 主菜单并选择 More tools &gt; Task manager，打开任务管理器。"></a>按 Shift+Esc 或者转到 Chrome 主菜单并选择 More tools &gt; Task manager，打开任务管理器。</h2><p><img src="/images/test/32.mdHqYNETTT.png" alt=""></p>
<h2 id="Timeline记录可视化内存泄漏"><a href="#Timeline记录可视化内存泄漏" class="headerlink" title="Timeline记录可视化内存泄漏"></a>Timeline记录可视化内存泄漏</h2><p><img src="/images/test/32.md3bUgYRQd.png" alt=""></p>
<p>上图可以看到jsheap越来越大，在实际使用过程中，如果您看到这种 JS 堆大小或节点大小不断增大的模式，则可能存在内存泄漏。</p>
<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> detachedTree1;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> ul = <span class="built_in">document</span>.createElement(<span class="string">'ul'</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">        <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</div><div class="line">        ul.appendChild(li);</div><div class="line">    &#125;</div><div class="line">    detachedTree1 = ul;</div><div class="line">&#125;</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'grow'</span>).addEventListener(<span class="string">'click'</span>, create);</div></pre></td></tr></table></figure>
<h2 id="使用堆快照发现已分离的dom树内存泄漏"><a href="#使用堆快照发现已分离的dom树内存泄漏" class="headerlink" title="使用堆快照发现已分离的dom树内存泄漏"></a>使用堆快照发现已分离的dom树内存泄漏</h2><p>还是上述代码<br><img src="/images/test/32.mdLCZRkQTO.png" alt=""></p>
<p>快照可能需要一些时间处理和加载。完成后，请从左侧面板（名称为 HEAP SNAPSHOTS）中选择该快照。</p>
<p>在 Class filter 文本框中键入 Detached，搜索已分离的 DOM 树。</p>
<p>以黄色突出显示的节点具有 JavaScript 代码对它们的直接引用。 以红色突出显示的节点则没有直接引用。只有属于黄色节点的树时，它们才处于活动状态。 一般而言，您需要将注意力放在黄色节点上。 修复代码，使黄色节点处于活动状态的时间不长于需要的时间，您也需要消除属于黄色节点树的红色节点。</p>
<p>点击黄色节点对其进行进一步调查。在 Object 窗格中，您可以看到与正在引用该节点的代码相关的更多信息。 例如，在下面的屏幕截图中，您可以看到 detachedTree 变量正在引用该节点。要解决这一特定的内存泄漏，您需要研究使用 detachedTree 的代码并确保在不需要时，此代码可以移除其对节点的引用。<br><img src="/images/test/32.mdu5sawPGR.png" alt=""></p>
<h2 id="使用内存分配来查看"><a href="#使用内存分配来查看" class="headerlink" title="使用内存分配来查看"></a>使用内存分配来查看</h2><p><img src="/images/test/32.mdcHJUtoaZ.png" alt=""></p>
<h2 id="使用函数调用查看内存分配"><a href="#使用函数调用查看内存分配" class="headerlink" title="使用函数调用查看内存分配"></a>使用函数调用查看内存分配</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/25/31/" itemprop="url">
                  备忘录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-25T15:41:30+08:00" content="2017-05-25">
              2017-05-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>js serialize 序列化（表单转字符串）</p>
<p>post 请求<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> xhr = CreateXHR();</div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(xhr.readyState == <span class="number">4</span>)&#123;<span class="comment">//检测XHR的readyState属性</span></div><div class="line">            <span class="keyword">if</span>((xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt;= <span class="number">300</span>) || xhr.status == <span class="number">304</span>)&#123;</div><div class="line">                alert(xhr.responseText);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                alert(<span class="string">"Request was unsuccessful:"</span> + xhr.status);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    xhr.open(<span class="string">"post"</span>,<span class="string">"post.php"</span>,<span class="literal">true</span>);</div><div class="line">    xhr.setRequestHeader(<span class="string">"Content-Type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line">    <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">"ID"</span>);</div><div class="line">    xhr.send(serialize(form));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>get和post区别<br>1.get用于信息获取，post用于修改服务器上的资源<br>2.get数据附在url后，post放在http报文实体的主体中<br>3.get数据量限制在2kb ，由于浏览器对url有限制，ie为2kb，chrome、firefox理论上没有限制，真正限制取决于操作系统，post对数据没有限制，取决于服务器端处理程序的能力</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  <span class="comment">// TDZ开始</span></div><div class="line">  tmp = <span class="string">'abc'</span>; <span class="comment">// ReferenceError</span></div><div class="line">  <span class="built_in">console</span>.log(tmp); <span class="comment">// ReferenceError</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> tmp; <span class="comment">// TDZ结束</span></div><div class="line">  <span class="built_in">console</span>.log(tmp); <span class="comment">// undefined</span></div><div class="line"></div><div class="line">  tmp = <span class="number">123</span>;</div><div class="line">  <span class="built_in">console</span>.log(tmp); <span class="comment">// 123</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码中，在let命令声明变量tmp之前，都属于变量tmp的“死区”。</p>
<p>“暂时性死区”也意味着typeof不再是一个百分之百安全的操作。</p>
<p>所以，在没有let之前，typeof运算符是百分之百安全的，永远不会报错。现在这一点不成立了。这样的设计是为了让大家养成良好的编程习惯，变量一定要在声明之后使用，否则就报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">x = y, y = 2</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [x, y];</div><div class="line">&#125;</div><div class="line"></div><div class="line">bar(); <span class="comment">// 报错</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">y=2,x = y</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [x, y];</div><div class="line">&#125;</div><div class="line"></div><div class="line">bar(); <span class="comment">//[2,2]</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/25/30/" itemprop="url">
                  gzip压缩
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-25T14:22:57+08:00" content="2017-05-25">
              2017-05-25
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>正常的http请求</p>
<p><img src="/images/test/30.mdb2H0W2dg.png" alt=""></p>
<p>问题在哪呢？</p>
<p>100kb非常大，实际上html是非常冗余的，html,table,div标签都有结束标签，实际上内容都一样，大量的单词是重复的，不管你怎样切分，html都不是精简的</p>
<p>解决方案：zip</p>
<p><img src="/images/test/30.mdj40gcEGi.png" alt=""></p>
<p>yahoo主页通过压缩从101kb到15kb</p>
<p>更多细节</p>
<p>这个交换的关键点就在于浏览器和服务器端知道发送zipped文件是ok的，这个约点有两个部分</p>
<p>浏览器发送一个header 告诉服务器端，它支持gzip和deflate（两种压缩方式）</p>
<p>Accept-Encoding: gzip, deflate</p>
<p>服务器端发送一个响应，告诉他内容是压缩的</p>
<p>Content-Encoding: gzip</p>
<p>服务器端如果没有返回上面这个字段，则表明它不是压缩的</p>
<p>#设置server<br>好消息是我们控制不了浏览器，它要么支持gzip要么不支持</p>
<p>我们要做的是配置服务器端，在浏览器支持gzip的情况下，返回zipped文件</p>
<p>apache中在.htaccess设置如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"># compress text, html, javascript, css, xml:</div><div class="line">AddOutputFilterByType DEFLATE text/plain</div><div class="line">AddOutputFilterByType DEFLATE text/html</div><div class="line">AddOutputFilterByType DEFLATE text/xml</div><div class="line">AddOutputFilterByType DEFLATE text/css</div><div class="line">AddOutputFilterByType DEFLATE application/xml</div><div class="line">AddOutputFilterByType DEFLATE application/xhtml+xml</div><div class="line">AddOutputFilterByType DEFLATE application/rss+xml</div><div class="line">AddOutputFilterByType DEFLATE application/javascript</div><div class="line">AddOutputFilterByType DEFLATE application/x-javascript</div><div class="line"></div><div class="line"># Or, compress certain file types by extension:</div><div class="line">&lt;files *.html&gt;</div><div class="line">SetOutputFilter DEFLATE</div><div class="line">&lt;/files&gt;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/23/29/" itemprop="url">
                  nodejs 与javascript 关系
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-23T11:07:59+08:00" content="2017-05-23">
              2017-05-23
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>node.js是什么？和JavaScript有什么关系？</p>
<p> 关于node.js究竟是什么，大家的问题在于</p>
<p>node.js是不是一门语言？<br>node.js是不是一个JavaScript库函数？<br>node.js是不是一个JavaScript框架？<br> 很遗憾，这三个问题的答案都是NO，看看官方对自己的描述</p>
<p>Node.js is a platform built on Chrome’s JavaScript runtime for easily building fast, scalable network applications. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient, perfect for data-intensive real-time applications that run across distributed devices.</p>
<p>官方很明确地说node.js是一个platform，也就是一个做xxx的平台。node.js是一个可以在服务器端运行JavaScript的平台，其实这句话华也不准确，按照《JavaScript权威指南》《JavaScript高级程序设计》等书中的定义，JavaScript是由两部分组成</p>
<p>core JavaScript<br>client JavaScript（DOM、BOM）<br>而只有core JavaScript可以在node.js上运行，所以node.js借用了JavaScript的语法，但并不能用来处理浏览器对象（BOM）及文档对象（DOM），所以node.js并不是设计为在服务器端运行解析html文档的（当然有module可以做此事），所以“在服务器端运行的JavaScript”在一定程度上误导了初学者。</p>
<p>同时node.js并不仅仅运行core JavaScript，node.js中还有文件系统、模块包、操作系统API、网络通信、二进制类型处理等core JavaScript不具备的功能。</p>
<p>nodejs 底层*nix 与window的区别</p>
<p><img src="/images/test/29.mddHFUETR8.png" alt=""></p>
<p>node w3c js关系</p>
<p><img src="/images/test/29.mdyW6KLL6S.png" alt=""></p>
<p>在nodejs中引入模块，需要经历3个步骤：<br>1 路径分析<br>2 文件定位<br>3 编译执行</p>
<p>node中分为核心模块（http/fs/path）与文件模块<br>在node进程启动过程中，部分核心模块被直接加载进内存中，所以这部分核心模块引入时，文件定位及编译执行这两个步骤可以省略掉，并且在路径分析中优先判断，所以他们的加载速度是最快的。</p>
<p>每个模块文件中都存在require、exports、module这三个变量,甚至还有<strong>filename、</strong>dirname<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">module</span>.paths);</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">require</span>.extensions);</div><div class="line"><span class="built_in">console</span>.log(__filename);</div><div class="line"><span class="built_in">console</span>.log(__dirname);</div><div class="line"></div><div class="line"><span class="comment">/* *</span></div><div class="line">[ '/Users/liuhui/Desktop/mylab/pkg/node_modules',</div><div class="line">  '/Users/liuhui/Desktop/mylab/node_modules',</div><div class="line">  '/Users/liuhui/Desktop/node_modules',</div><div class="line">  '/Users/liuhui/node_modules',</div><div class="line">  '/Users/node_modules',</div><div class="line">  '/node_modules' ]</div><div class="line">&#123; '.js': [Function], '.json': [Function], '.node': [Function] &#125;</div><div class="line">/Users/liuhui/Desktop/mylab/pkg/module_path.js</div><div class="line">/Users/liuhui/Desktop/mylab/pkg</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>这是因为编译过程中，node对获取的js文件进行了头尾包装，在头部加上了<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">exports,require,module,__filename,__dirname</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</div><div class="line">    exports.area = <span class="function"><span class="keyword">function</span>(<span class="params">radius</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.PI*radius*radius</div><div class="line">    &#125;;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>require、exports、module就是node对commonjs规范的实现</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/17/28/" itemprop="url">
                  electron在企业云盘中的应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-17T12:39:26+08:00" content="2017-05-17">
              2017-05-17
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="简要介绍"><a href="#简要介绍" class="headerlink" title="简要介绍"></a>简要介绍</h1><ul>
<li>Electron是一个可以使用js、html、css创建桌面应用的库</li>
<li>可以创建mac、window、linux等应用</li>
<li>atom基于electron开发，以前叫atom-shell</li>
</ul>
<p><img src="/images/6.1.png" alt=""></p>
<h1 id="如何开发你的desktop应用"><a href="#如何开发你的desktop应用" class="headerlink" title="如何开发你的desktop应用"></a>如何开发你的desktop应用</h1><ul>
<li>一个简单的 demo<br> <a href="https://github.com/sindresorhus/electron-boilerplate/tree/master/boilerplate" target="_blank" rel="external">demo</a></li>
<li>一个入口main.js（mainProcess）+ 一个index.html（renderProcess）</li>
<li>执行 electron main.js</li>
</ul>
<h1 id="企业云盘的整体结构"><a href="#企业云盘的整体结构" class="headerlink" title="企业云盘的整体结构"></a>企业云盘的整体结构</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">├── build(app打包资源)</div><div class="line">├── readme.md</div><div class="line">├── release(发布路径)</div><div class="line">├── renderProcess（渲染进程）</div><div class="line">├── mainProcess（主进程）</div><div class="line">├── plugin(插件)</div><div class="line">├── certs(证书)</div><div class="line">├── build.sh(自动发版脚本)</div><div class="line">├── config.js(全局配置项)</div><div class="line">├── package.json</div><div class="line">└── windowinstall.js（window安装包生成脚本）</div></pre></td></tr></table></figure>
<ul>
<li>整体的结构就是按照两个进程来划分</li>
<li>renderProcess中可以使用任何你想用的架构，企业云盘采用的是react+redux+router结构</li>
<li>企业云盘开发环境中采用localhost:3000的实时编译调试模式，发包时采用file协议</li>
</ul>
<h3 id="mainProces"><a href="#mainProces" class="headerlink" title="mainProces:"></a>mainProces:</h3><h4 id="数据库采用nodejs库-nedb-mainProcess-database"><a href="#数据库采用nodejs库-nedb-mainProcess-database" class="headerlink" title="数据库采用nodejs库 nedb(mainProcess/database)"></a>数据库采用nodejs库 nedb(mainProcess/database)</h4><p>数据文件存储在应用数据下的.clouddiskdata，刚开始采用的是mongodb,后来打包发现太大，多40多M，还卡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> Datastore = <span class="built_in">require</span>(<span class="string">'nedb'</span>);</div><div class="line"><span class="keyword">let</span> db = <span class="keyword">new</span> Datastore(&#123; filename: <span class="string">'path/to/datafile'</span> &#125;);</div><div class="line">db.loadDatabase(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;    <span class="comment">// Callback is optional</span></div><div class="line">  <span class="comment">// Now commands will be executed</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>注意nedb为了保证数据的持久性，每一次update或者delete操作实际上都是在最后一行添加一条数据，但是每次load database的时候，会自动合并所有的数据项，所以云盘里面可以看到每次update都调用了<br>db.loadDatabase();</p>
<p>官方解释如下：</p>
<p>Under the hood, NeDB’s persistence uses an append-only format, meaning that all updates and deletes actually result in lines added at the end of the datafile, for performance reasons. The database is automatically compacted (i.e. put back in the one-line-per-document format) every time you load each database within your application.</p>
<p><a href="https://github.com/louischatriot/nedb" target="_blank" rel="external">官网</a></p>
<h4 id="登录认证-mainProcess-uuap"><a href="#登录认证-mainProcess-uuap" class="headerlink" title="登录认证 (mainProcess/uuap)"></a>登录认证 (mainProcess/uuap)</h4><p>浏览器向server发起请求,server端进行登录，并且在head中set-cookie</p>
<p>mainProcess通过该有效cookie发起后续所有请求</p>
<p>renderProcess中的请求通过ipc通信方式使用nodejs的request模块来进行通信</p>
<h4 id="浏览器中直接调起客户端，urlScheme-mainProcess-urlProtocol"><a href="#浏览器中直接调起客户端，urlScheme-mainProcess-urlProtocol" class="headerlink" title="浏览器中直接调起客户端，urlScheme(mainProcess/urlProtocol)"></a>浏览器中直接调起客户端，urlScheme(mainProcess/urlProtocol)</h4><p>1.浏览器端 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"ecloud-baidu://open"</span>&gt;</span>添加备份<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2.mainProcess代码如下<br>    <img src="/images/test/28.md0uZGp9DO.png" alt=""></p>
<p>3.配置info.plist<br>    <img src="/images/test/28.mdFssiOOjv.png" alt=""></p>
<p>4.打包过程中也需要配置下，否则mac中不生效<br>    <img src="/images/test/28.mdI503ErtM.png" alt=""></p>
<h4 id="窗口管理器（mainProcess-windowManage）"><a href="#窗口管理器（mainProcess-windowManage）" class="headerlink" title="窗口管理器（mainProcess/windowManage）"></a>窗口管理器（mainProcess/windowManage）</h4><pre><code>1.企业云盘总共有三个window（主页、设置页、预览页、反馈页、二次确认页）   
</code></pre><h4 id="traymenu控制（mainProcess-trayMenu）"><a href="#traymenu控制（mainProcess-trayMenu）" class="headerlink" title="traymenu控制（mainProcess/trayMenu）"></a>traymenu控制（mainProcess/trayMenu）</h4><p>参考官方api写即可，大致代码如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> contextMenu = Menu.buildFromTemplate([</div><div class="line">    &#123;</div><div class="line">        label: <span class="string">'访问网页版'</span>,</div><div class="line">        click: () =&gt; &#123;</div><div class="line">            shell.openExternal(<span class="string">'http://ecloud.baidu.com'</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;, &#123;</div><div class="line">        label: <span class="string">'反馈'</span>,</div><div class="line">        click: (e) =&gt; &#123;</div><div class="line">            renderFeedBack(<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;, &#123;</div><div class="line">        label: <span class="string">'设置'</span>,</div><div class="line">        click: (e) =&gt; &#123;</div><div class="line">            renderSettingWindow(<span class="number">1</span>);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;, &#123;</div><div class="line">        label: <span class="string">'退出'</span>,</div><div class="line">        click: () =&gt; &#123;</div><div class="line">            app.quit();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">])</div></pre></td></tr></table></figure></p>
<p><img src="/images/test/28.mdVNSa2xBo.png" alt=""></p>
<h4 id="传输控制（mainProcess-transfile-、-mainProcess-watcher）"><a href="#传输控制（mainProcess-transfile-、-mainProcess-watcher）" class="headerlink" title="传输控制（mainProcess/transfile 、 mainProcess/watcher）"></a>传输控制（mainProcess/transfile 、 mainProcess/watcher）</h4><p>本地文件增删改查检测（使用nodejs库chokidar，目前mac已迁移到Object-c的app中）</p>
<p>关于electron中与oc app的通信方式。目前采用的是shell里面的open命令，以及web server方式<br>mainProcess中创建webserver服务，oc中通过发起http请求进行通信<br>mainProcess和oc通信采用open方式</p>
<p>云盘接受oc的web服务<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123; </div><div class="line"></div><div class="line">        <span class="comment">//.....</span></div><div class="line">        <span class="comment">/*前端需要备份的文件*/</span></div><div class="line">        <span class="keyword">if</span> (urlObj.pathname === <span class="string">'/set/file'</span>) &#123;</div><div class="line">            response.end(<span class="string">'end'</span>);</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        <span class="comment">/*获取我的备份下需要备份的根目录或者文件*/</span></div><div class="line">        <span class="keyword">if</span> (urlObj.pathname === <span class="string">'/get/rootpath'</span>) &#123;</div><div class="line">        &#125;</div><div class="line">&#125;).listen(<span class="number">8887</span>);</div><div class="line">        <span class="comment">//.......</span></div></pre></td></tr></table></figure></p>
<p>打开oc应用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> execSync = <span class="built_in">require</span>(<span class="string">'child_process'</span>).execSync;</div><div class="line">execSync(<span class="string">'open ecloud-sync-backup-file.app'</span>, &#123;</div><div class="line">    cwd: <span class="string">`<span class="subst">$&#123;config.projectPath&#125;</span>/mainProcess/watcher/OC/ecloud-sync-backup-file`</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>md5计算，采用md5-file<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> md5File = <span class="built_in">require</span>(<span class="string">'md5-file'</span>);</div><div class="line">md5File(filePath, (err, hash2) =&gt; &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>分片：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fs.createReadStream(filePath, &#123;</div><div class="line">    start : i * limit,</div><div class="line">    end   : (i * limit + limit - <span class="number">1</span>) &gt; lastByte? lastByte: i * limit + limit - <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="系统通知："><a href="#系统通知：" class="headerlink" title="系统通知："></a>系统通知：</h4><p>mac采用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/notification" target="_blank" rel="external">notification</a><br>window采用nodejs的node-notifier模块</p>
<h4 id="自动更新客户端（mainProcess-checkUpdate）"><a href="#自动更新客户端（mainProcess-checkUpdate）" class="headerlink" title="自动更新客户端（mainProcess/checkUpdate）"></a>自动更新客户端（mainProcess/checkUpdate）</h4><p><a href="https://electron.atom.io/docs/api/auto-updater/" target="_blank" rel="external">官方文档</a></p>
<p>官方提供了几个自动更新的项目，nuts/electron-release-server/squirrel-updates-server/squirrel-release-server,这几个项目中其中2个都是采用github来进行发布，不符合我国国情</p>
<p>企业云采用了electron-release-server这个项目来搭建自动升级服务</p>
<ul>
<li><p>基于docker-compose</p>
<ul>
<li>中间遇到的坑，这个项目基于docker-composer 的version2 版本，最低要求docker的版本为1.9.1以上，具体可参考 <a href="https://docs.docker.com/compose/compose-file/compose-file-v2/#args" target="_blank" rel="external">https://docs.docker.com/compose/compose-file/compose-file-v2/#args</a></li>
<li>最后采用了ubuntu的服务器，centos版本都太低</li>
<li>开源项目里面需要简单的配置下数据库、服务器、修改资源存储的路径为永久存储</li>
<li>公司的服务器的端口必须是8000以上，刚开始设置了个5555 怎么都不好使，能ping通，但是浏览器没法访问</li>
</ul>
</li>
<li><p>包含了资源存储</p>
</li>
<li>强大的api支持</li>
<li>使用Squirrel来模块来完成自动升级<ul>
<li>mac使用.dmg和.zip</li>
<li>window 使用.exe .nupkg</li>
</ul>
</li>
</ul>
<p>关于自动更新中必须要注意的几个点：</p>
<ul>
<li><p>必须要有证书</p>
<ul>
<li>mac通过开发者账号生成,公司苹果开发者团队，可以通过权限申请加入，地址：<a href="http://appdev.baidu.com/" target="_blank" rel="external">http://appdev.baidu.com/</a><br><img src="/images/test/28.mdQQtjgulk.png" alt=""></li>
<li>window证书<br>ecloud.pfx,带秘钥的证书，具体可以参考 <a href="https://www.npmjs.com/package/electron-installer-windows" target="_blank" rel="external">如何生成pfx的证书</a></li>
</ul>
</li>
<li><p>具体方案可以参考 <a href="https://medium.com/@svilen/auto-updating-apps-for-windows-and-osx-using-electron-the-complete-guide-4aa7a50b904c" target="_blank" rel="external">Auto-updating apps for Windows and OSX using Electron: The complete guide</a></p>
</li>
<li><p>自动更新提示如下<br><img src="/images/test/28.mdjmQL57oN.png" alt=""><br><img src="/images/test/28.mdc16yuk4H.png" alt=""></p>
</li>
<li><p>遇到坑<br>mac中autoUpdater.quitAndInstall(); 没有自动重启应用<br>可以通过<br>/Users/liuhui/Library/Caches/com.electron.ecloud.ShipIt下的<br>ShipIt_stderr.log来查看问题所在</p>
</li>
</ul>
<p>window中采用squirrel安装方式后很多问题，安装过程中应用就被打开，需要处理下squirrel事件,可以参考 <a href="https://github.com/electron/windows-installer" target="_blank" rel="external">https://github.com/electron/windows-installer</a></p>
<h4 id="flash的支持"><a href="#flash的支持" class="headerlink" title="flash的支持"></a>flash的支持</h4><p>需要添加pepper flash插件，Pepper Flash Player 是由Google维护的专用于chromium引擎的flash播放器</p>
<p>首先是在自己电脑上找到pepper flash的插件（mac及window版本）</p>
<p>结果如下：</p>
<p>• 如果你有安装Chrome浏览器，可以在地址栏输入chrome://plugins/，点击右侧的详细信息，找到Adobe Flash Player条目,目前chrome已经废弃掉chrome://plugins/地址<br>• 实际mac地址：/Library/Internet Plug-Ins/PepperFlashPlayer/PepperFlashPlayer.plugin<br>window地址：C:\Windows\System32\Macromed\Flash\pepflashplayer64_24_0_0_194.dll(名称和版本号可能有出入) 重命名为pepflashplayer.dll即可。</p>
<p>中间遇到的坑：</p>
<ul>
<li>window上不好使，提示“无法加载插件”，确定为pepflashplayer64_24_0_0_194.dll的问题，去网上下载了一个</li>
<li>chrome 53里面的flash有个闪烁的bug，浏览器bug，需要升级chrome版本</li>
</ul>
<p>pepper flash引入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> pluginName;</div><div class="line"><span class="keyword">switch</span> (process.platform) &#123;</div><div class="line">  <span class="keyword">case</span> <span class="string">'win32'</span>:</div><div class="line">    pluginName = <span class="string">'pepflashplayer.dll'</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  <span class="keyword">case</span> <span class="string">'darwin'</span>:</div><div class="line">    pluginName = <span class="string">'PepperFlashPlayer.plugin'</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  <span class="keyword">case</span> <span class="string">'linux'</span>:</div><div class="line">    pluginName = <span class="string">'libpepflashplayer.so'</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">&#125;</div><div class="line">app.commandLine.appendSwitch(<span class="string">'ppapi-flash-path'</span>, path.join(__dirname+<span class="string">'/plugins/'</span>, pluginName))</div></pre></td></tr></table></figure>
<h4 id="网络检测-mainProcess-network"><a href="#网络检测-mainProcess-network" class="headerlink" title="网络检测(mainProcess/network)"></a>网络检测(mainProcess/network)</h4><p>网络监测刚开始采用的 <a href="https://developer.mozilla.org/en-US/docs/Online_and_offline_events" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Online_and_offline_events</a><br>监测很准确，这种检测仅仅针对lan是否有连接，实际情况是很多时候网络是连着的，但是不能上网<br>后面换成nodejs的方案</p>
<h3 id="renderProcess"><a href="#renderProcess" class="headerlink" title="renderProcess"></a>renderProcess</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">├── bin</div><div class="line">│   ├── compile.js</div><div class="line">│   └── server.js</div><div class="line">├── build</div><div class="line">│   ├── dll</div><div class="line">│   ├── package.json</div><div class="line">│   ├── webpack-compiler.js</div><div class="line">│   ├── webpack.config.js</div><div class="line">│   └── webpack.dll.config.js</div><div class="line">├── config</div><div class="line">│   └── index.js</div><div class="line">├── package.json</div><div class="line">├── server</div><div class="line">│   └── main.js</div><div class="line">└── src</div><div class="line">    ├── components 组件</div><div class="line">    ├── containers 容器</div><div class="line">    ├── index.html 入口html</div><div class="line">    ├── ipcCenter.js 消息中心</div><div class="line">    ├── layouts 布局</div><div class="line">    ├── main.js 入口js</div><div class="line">    ├── routes 路由</div><div class="line">    ├── static 静态js</div><div class="line">    ├── statichtml 其他入口html</div><div class="line">    ├── store 通用的store</div><div class="line">    └── styles 样式</div></pre></td></tr></table></figure>
<h3 id="两个进程"><a href="#两个进程" class="headerlink" title="两个进程"></a>两个进程</h3><p><a href="https://electron.atom.io/docs/" target="_blank" rel="external">官方网站</a></p>
<ul>
<li>electron合并了chromium和node.js</li>
<li>提供了一系列的api进行native开发，例如file dialogs,notifications,icons更多</li>
</ul>
<h4 id="中间的坑："><a href="#中间的坑：" class="headerlink" title="中间的坑："></a>中间的坑：</h4><ul>
<li>可以看到官方网站提供了mainProcess和renderProcess区分了接口，但是这两个api并不是完全独立的，renderProces提供的remote模块可以获取到mainProcess到所有的api，详细见接口 <a href="https://electron.atom.io/docs/api/remote/" target="_blank" rel="external">接口文档</a></li>
<li>企业云盘在mainProcess里面定义了整个app通用的全局变量：<br><img src="/images/test/28.md0lkNZKGr.png" alt=""></li>
<li>虽然renderProcess中可以访问到mainProcess里面的全局变量，但是renderProcess里面修改并不会影响到mainPorcess里面的变量<br><img src="/images/test/28.md9dJCVX6I.png" alt=""></li>
</ul>
<h2 id="打包方式"><a href="#打包方式" class="headerlink" title="打包方式"></a>打包方式</h2><p>打包方式，企业云盘用过2种</p>
<ul>
<li><a href="https://github.com/electron-userland/electron-packager" target="_blank" rel="external">electron-package</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&quot;build&quot;: &quot;electron-packager ./ clouddisk --platform=darwin,win32 --arch=x64 --prune --overwrite --version=1.4.13 --ignore renderProcess/node_modules --icon ./icon&quot;,</div><div class="line">&quot;buildwin&quot;: &quot;electron-packager ./ clouddisk --platform=win32 --arch=x64 --prune --overwrite --version=1.4.13 --ignore renderProcess/node_modules --icon ./icon&quot;,</div><div class="line">&quot;buildmac&quot;: &quot;electron-packager ./ clouddisk --platform=darwin --arch=x64 --prune --overwrite --version=1.4.3 --ignore renderProcess/node_modules --icon ./icon&quot;,</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/electron-userland/electron-builder" target="_blank" rel="external">electron-builder</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&quot;build&quot;: &#123;</div><div class="line">    &quot;appId&quot;: &quot;com.electron.ecloud&quot;,</div><div class="line">    &quot;productName&quot;: &quot;ecloud&quot;,</div><div class="line">    &quot;mac&quot;: &#123;</div><div class="line">      &quot;extendInfo&quot;: &quot;build/info.plist&quot;</div><div class="line">    &#125;,</div><div class="line">    // ...</div></pre></td></tr></table></figure>
<p>这两种打包方式的区别：<br>electron-package 仅能打出应用程序，无法打出安装包，配置项没有electron-builder那么灵活</p>
<p>electron-builder 支持非常强大的配置，可以参考 <a href="https://github.com/electron-userland/electron-builder/wiki/Options" target="_blank" rel="external">官网</a></p>
<p>需要注意的是自动更新需要打出nupkg的包，electron-builder也是支持的<br><img src="/images/test/28.mdEjTOVah6.png" alt=""></p>
<p>自动更新依赖于squirrel模块，这个模块决定了window的打包方式必须是squirrel的安装包，从而决定了不一样的window安装包（nsis或者squirrel）</p>
<p>squirrel安装包依赖于net 4.5</p>
<h2 id="调试技巧"><a href="#调试技巧" class="headerlink" title="调试技巧"></a>调试技巧</h2><ul>
<li>抓包<br>企业云盘里面所有的请求都基于node的request模块，所以给request设置下代理即可，如下</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 只能代理到http</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'./mainProcess/request'</span>).defaults(&#123; proxy: <span class="string">'http://127.0.0.1:8888'</span> &#125;) </div><div class="line"><span class="comment">// https如下</span></div><div class="line"><span class="keyword">let</span> useProxy=<span class="number">1</span>;</div><div class="line"><span class="keyword">if</span>(useProxy)&#123;</div><div class="line">    process.env.https_proxy = <span class="string">"http://127.0.0.1:8888"</span>;</div><div class="line">    process.env.http_proxy = <span class="string">"http://127.0.0.1:8888"</span>;</div><div class="line">    process.env.NODE_TLS_REJECT_UNAUTHORIZED = <span class="string">"0"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="string">``</span><span class="string">`  </span></div><div class="line"></div><div class="line">- 调试renderProcess 打开browser window的控制台</div><div class="line"></div><div class="line">`<span class="string">``</span> javascript</div><div class="line"></div><div class="line">/localhost/.test(appUrl) &amp;&amp; win.webContents.openDevTools();</div></pre></td></tr></table></figure>
<ul>
<li><p>调试mainProcess<br>console.log直接会在terminal中打出，另外全局有写一个小工具debugInRender,这个工具会将mainProcess的调试信息打印在renderProcess的控制台中</p>
</li>
<li><p>调试用户的电脑<br>企业云盘-显示包内容-contents-resources-app里面，修改代码重启可生效，<br>当然云盘在打包的时候可以压缩所有代码为asar格式的，只需要在package的配置中添加</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">"asar": true</div></pre></td></tr></table></figure>
<ul>
<li>mac中crash情况debugger</li>
</ul>
<p><a href="https://electron.atom.io/docs/development/debugging-instructions-macos/" target="_blank" rel="external">https://electron.atom.io/docs/development/debugging-instructions-macos/</a></p>
<ul>
<li><p>官方给出的调试方案<br><a href="https://github.com/electron/electron/blob/master/docs/tutorial/debugging-main-process.md" target="_blank" rel="external">https://github.com/electron/electron/blob/master/docs/tutorial/debugging-main-process.md</a></p>
</li>
<li><p>使用visual studio code进行调试<br>详细参考 <a href="https://www.youtube.com/watch?v=nuZIeJ0ljgo" target="_blank" rel="external">https://www.youtube.com/watch?v=nuZIeJ0ljgo</a><br>具体的launch.json配置如下</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="string">"program"</span>: <span class="string">"$&#123;workspaceRoot&#125;/main.js"</span>,</div><div class="line"><span class="string">"runtimeExecutable"</span>:<span class="string">"/Users/liuhui/.tnvm/versions/node/v6.6.0/bin/electron"</span>,</div><div class="line"><span class="string">"runtimeArgs"</span>:[</div><div class="line">    <span class="string">"-enable-logging"</span></div><div class="line">],</div><div class="line"><span class="string">"env"</span>:&#123;</div><div class="line">    <span class="string">"NODE_ENV"</span>: <span class="string">"development"</span>,</div><div class="line">    <span class="string">"DEBUG"</span>: <span class="string">"app:*"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>electron 文章</p>
<p><a href="https://nulab-inc.com/blog/typetalk/3-necessary-things-to-correctly-release-a-product-based-on-the-electron-app/" target="_blank" rel="external">https://nulab-inc.com/blog/typetalk/3-necessary-things-to-correctly-release-a-product-based-on-the-electron-app/</a></p>
<p>electron和nw区别</p>
<p><a href="https://github.com/electron/electron/blob/master/docs/development/atom-shell-vs-node-webkit.md" target="_blank" rel="external">https://github.com/electron/electron/blob/master/docs/development/atom-shell-vs-node-webkit.md</a></p>
<h2 id="相关资源"><a href="#相关资源" class="headerlink" title="相关资源"></a>相关资源</h2><p><a href="https://electron.atom.io/docs/" target="_blank" rel="external">https://electron.atom.io/docs/</a><br><a href="https://github.com/electron-userland/electron-builder" target="_blank" rel="external">https://github.com/electron-userland/electron-builder</a><br><a href="https://github.com/electron/windows-installer" target="_blank" rel="external">https://github.com/electron/windows-installer</a><br><a href="https://github.com/ArekSredzki/electron-release-server" target="_blank" rel="external">https://github.com/ArekSredzki/electron-release-server</a><br><a href="https://github.com/electron/electron/blob/master/docs/development/atom-shell-vs-node-webkit.md" target="_blank" rel="external">https://github.com/electron/electron/blob/master/docs/development/atom-shell-vs-node-webkit.md</a><br><a href="https://medium.com/developers-writing/building-a-desktop-application-with-electron-204203eeb658" target="_blank" rel="external">https://medium.com/developers-writing/building-a-desktop-application-with-electron-204203eeb658</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/11/27/" itemprop="url">
                  node request请求如何抓包+js正则+htmlCollection
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-11T15:51:32+08:00" content="2017-05-11">
              2017-05-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一样的使用charles进行抓包"><a href="#一样的使用charles进行抓包" class="headerlink" title="一样的使用charles进行抓包"></a>一样的使用charles进行抓包</h1><p>charles中配置:</p>
<p>http代理地址为:<a href="http://127.0.0.1:8888" target="_blank" rel="external">http://127.0.0.1:8888</a><br>https代理地址为:<a href="http://127.0.0.1:8989" target="_blank" rel="external">http://127.0.0.1:8989</a></p>
<p>如下图<br><img src="/images/test/27.mdg6qrDWBh.png" alt=""></p>
<h1 id="node里面需要使用代理的时候添加"><a href="#node里面需要使用代理的时候添加" class="headerlink" title="node里面需要使用代理的时候添加"></a>node里面需要使用代理的时候添加</h1><p>process.env.https_proxy = “<a href="http://127.0.0.1:8888" target="_blank" rel="external">http://127.0.0.1:8888</a>“;<br>process.env.http_proxy = “<a href="http://127.0.0.1:8989" target="_blank" rel="external">http://127.0.0.1:8989</a>“;<br>process.env.NODE_TLS_REJECT_UNAUTHORIZED = “0”;</p>
<h1 id="补充下charles如何抓包https"><a href="#补充下charles如何抓包https" class="headerlink" title="补充下charles如何抓包https"></a>补充下charles如何抓包https</h1><p>安装证书</p>
<p><img src="/images/test/27.mdvta3eTXD.png" alt=""></p>
<p>信任证书</p>
<p><img src="/images/test/27.mdkQfW8PwO.png" alt=""></p>
<p>关于手机中配置charles的https代理，步骤如下</p>
<ul>
<li>真机测试在 iOS 使用电脑上的http代理(172.23.12.7:8888)</li>
<li>设备上使用Safari打开这个网址并安装证书 <a href="http://www.charlesproxy.com/getssl" target="_blank" rel="external">证书安装</a>    </li>
</ul>
<p>如果是ios10.3以下，这个时候 你可以看到已经可以抓包解析了，但是10.3以上还需在设置下</p>
<p>设置-&gt;通用-&gt;关于本机-&gt;证书信任设置-&gt; 找到charles proxy custom root certificate然后信任该证书即可.</p>
<p><img src="/images/test/27.mdCe15b7A0.png" alt=""></p>
<h1 id="js正则"><a href="#js正则" class="headerlink" title="js正则"></a>js正则</h1><p>前瞻断言<br>(?=exp) 顺序肯定环视，表示所在位置右侧能够匹配exp<br>(?!exp) 顺序否定环视，表示所在位置右侧不能匹配exp<br>后瞻断言<br>(?&lt;=exp) 逆序肯定环视，表示所在位置左侧能够匹配exp<br>(? &lt; !exp)  逆序否定环视，表示所在位置左侧不能匹配exp</p>
<p>例子：<br>/[^\s]+(?=ing)/g.exec(‘downing to do’);<br>[“down”, index: 0, input: “downing to do”]</p>
<h1 id="htmlCollection"><a href="#htmlCollection" class="headerlink" title="htmlCollection"></a>htmlCollection</h1><p>简言之：<br>var a = document.getElementsByClassName(‘test’)<br>var b = document.querySelectorAll(‘.test’)</p>
<p>a 会随 DOM 更改变动, b 不会</p>
<p><a href="https://jsfiddle.net/liuhuiashazj/2qc712zq/" target="_blank" rel="external">demo</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection" target="_blank" rel="external">htmlCollection</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes" target="_blank" rel="external">childNodes</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll" target="_blank" rel="external">querySelectorAll</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList" target="_blank" rel="external">nodelist</a></p>
<p>附带：</p>
<p>children和childNode区别<br>children是Element的属性，childNodes是Node的属性<br><img src="/images/test/27.mdwp8Kk3Se.png" alt=""><br>element继承了node类，element是node多种类型中的一种，即当NodeType为1时Node即为ElementNode，另外Element扩展了Node，Element拥有id、class、children等属性。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/13/26/" itemprop="url">
                  一些改变人生的书-扩展你的可能性
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-13T17:17:31+08:00" content="2017-04-13">
              2017-04-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一本有激情，非常有益于探索新事物的书"><a href="#一本有激情，非常有益于探索新事物的书" class="headerlink" title="一本有激情，非常有益于探索新事物的书"></a>一本有激情，非常有益于探索新事物的书</h1><p><a href="http://amzn.to/2qH9C7V" target="_blank" rel="external">How to Fly a Horse: The Secret History of Creation, Invention, and Discovery </a></p>
<h1 id="一本不可或缺的关于在混乱的世界中聚焦成功的书"><a href="#一本不可或缺的关于在混乱的世界中聚焦成功的书" class="headerlink" title="一本不可或缺的关于在混乱的世界中聚焦成功的书"></a>一本不可或缺的关于在混乱的世界中聚焦成功的书</h1><p>Deep Work: Rules for Focused Success in a Distracted World, by Cal Newport</p>
<p>只有自信的做事情才能确保你的大脑能降低到这一层：你可以重新为接下来的一天充电。换句话说，从晚上挤出一些降低你第二天工作效率的事情，虽然这样你会得到更少的事情被做完的结果</p>
<p>不同子领域的心理学家通过几十年的工作得出一个结论：规律性的休息下大脑将会提升深入工作的质量，当你工作时，努力工作，当你工作结束时，那就是结束了</p>
<h1 id="关于快乐生活，更少的焦虑、压力、耗尽的生活的秘密"><a href="#关于快乐生活，更少的焦虑、压力、耗尽的生活的秘密" class="headerlink" title="关于快乐生活，更少的焦虑、压力、耗尽的生活的秘密"></a>关于快乐生活，更少的焦虑、压力、耗尽的生活的秘密</h1><p><a href="http://amzn.to/2rqeTkX" target="_blank" rel="external">Mindfulness: An Eight-Week Plan for Finding Peace in a Frantic World</a></p>
<p>留心的培养我们做事的能力</p>
<p>冥想是一个通过不同重复可以获取他的力量的练习，只有通过这我们才能意识到我们大脑中重复模式</p>
<p>纯粹的有意识的超越思维。这可以让你走出负面的自我对话和应激性的冲动和情绪。这允许你重新审视下这个世界已开放的心态。当你这么做后，一中好奇并且满足的感觉将会重新出现在你的生活中</p>
<h1 id="一本传统的关于达到完美人生的灵感和智慧的书"><a href="#一本传统的关于达到完美人生的灵感和智慧的书" class="headerlink" title="一本传统的关于达到完美人生的灵感和智慧的书"></a>一本传统的关于达到完美人生的灵感和智慧的书</h1><p><a href="http://amzn.to/2qsUGaG" target="_blank" rel="external">How Will You Measure Your Life?</a></p>
<p>在你的生命中，一直都有需要时间和关注的需求</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/10/25/" itemprop="url">
                  node.js debugger
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-10T16:45:33+08:00" content="2017-04-10">
              2017-04-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2016.5月，nodejs支持debugger能力<br><a href="https://www.youtube.com/watch?v=x8u0n4dT-WI&amp;feature=youtu.be&amp;t=2571" target="_blank" rel="external">视频地址</a></p>
<p>1.node debugger（不是一个全功能的调试器，应用于简单调试）<br>nodejs支持一个基于tcp协议的和内建的客户端的debugger的工具包，使用方式如下<br>node debug mytest.js<br>调试过程中支持以下命令<br>cont, c: continue excution<br>next, n:step next<br>step, s:step in<br>out,o :step out<br>repl :read-eval-print loop 交互控制台</p>
<p>2.v8 inspector<br>使用<a href="https://chromedevtools.github.io/debugger-protocol-viewer/" target="_blank" rel="external">chrome debugger 协议</a><br>native node debugger使用v8-debug,devtool使用chrome debugger协议，所以node inspect要在这两者中间交互</p>
<p>node –inspect –debug-brk test.js</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="liuhuiashazj" />
          <p class="site-author-name" itemprop="name">liuhuiashazj</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">31</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liuhuiashazj</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
